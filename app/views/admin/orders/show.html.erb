<div class="container">

  <div class="row">
    <div class="offset-1 col-auto">
      <h3>注文履歴詳細</h3>
    </div>
  </div>

  <!--購入者情報-->
  <div class="row">
    <div class="col">
      <table>
        <thead>
          <tr>
            <th><strong>購入者</strong></th>
            <td>
              　<%= link_to @od.customer.full_name, admin_orders_path(:customer_id => @od.customer.id), class:"edit-link" %>
          　</td>
          </tr>

          <tr>
            <th><strong>注文日</strong></th>
            <td>　<%= @od.y_to_d%></td>
          </tr>

          <tr>
            <th><strong>配送先</strong></th>
            <td>
              　〒<%= @od.postcode %> <%= @od.address %><br>
              　<%= @od.name %>
            </td>
          </tr>

          <tr>
            <th><strong>支払方法</strong></th>

            <td>　<%= I18n.t("enums.order.payment_method.#{@od.payment_method}") %></td>

          </tr>

          <tr>
            <th><strong>注文ステータス</strong></th>
            <td>
              <%= form_with model: @od, url: admin_order_path, method: :patch do |f| %>
                　<%= f.select :status, Order.statuses.keys.map { |status| [I18n.t("enums.order.status.#{status}"), status] } %>
                <%= f.submit "更新",class:"ml-4 btn btn-success" %>
              <% end %>
            </td>
          </tr>
        </thead>
      </table>
    </div>
  </div>

  <!--商品情報-->
  <div class="row mt-3">
    <div class="col">
      <table class="table">
        <thead class="thead-light">
          <tr>
            <th>商品名</th>
            <th>単価（税込）</th>
            <th>数量</th>
            <th>小計</th>
            <th>製作ステータス</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @ols.each do |ol| %>
            <tr>
              <td><%= ol.item.name %></td>
              <td><%= ol.item.taxed_price.to_s(:delimited) %></td>
              <td><%= ol.amount %></td>
              <td><%= ol.sum.to_s(:delimited) %></td>
              <%= form_with model: ol, url: admin_order_detail_path, method: :patch do |f| %>
                <td>
                  <%= f.select :making_status, OrderDetail.making_statuses.keys.map { |status| [I18n.t("enums.order_details.making_status.#{status}"), status] } %>
                  <%= f.hidden_field :order_detail_id, :value => ol.id %>
                </td>
                <td>
                  <%= f.submit "更新", class:"btn btn-success" %>
                </td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

</div>